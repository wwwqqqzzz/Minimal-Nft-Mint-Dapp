# 问题排查手册

这里是我们一路"翻车"后的备忘录：问题怎么来的、怎么踩坑、又怎么填坑，都写得明明白白。

## 怎么用这份手册？

只要遇到 bug，先到 `common-issues.md` 搜关键字，大概率能找到解决办法；没有的话就在这里补上一条。

## 已收录案例

### ✅ totalSupply() 返回空数据问题
**问题描述**: 合约部署后，前端调用 `totalSupply()` 函数返回空数据  
**解决方案**: 详见 `common-issues.md` - 问题1  
**状态**: 已解决

### ✅ MetaMask 弹窗异常问题
**问题描述**: 点击铸造按钮后 MetaMask 弹窗异常或无响应  
**解决方案**: 详见 `common-issues.md` - 问题2  
**状态**: 已解决

### ✅ 网络切换功能实现
**问题描述**: 需要实现多网络支持和自动切换功能  
**解决方案**: 详见 `../study/network-switching-solution.md`  
**状态**: 已实现

### ✅ 合约部署和验证
**问题描述**: 合约部署到测试网络和主网的完整流程  
**解决方案**: 详见 `../deployment/deployment-guide.md`  
**状态**: 已完成

### ✅ 前端编译错误修复
**问题描述**: `src/App.js` 第 53、54 行 `connectSilently` 和 `refreshOnChainState` 未定义，导致 ESLint 报错  
**解决方案**: 详见 `common-issues.md` - 问题10  
**状态**: 已修复

### ✅ NFT 列表显示功能实现
**问题描述**: 需要实现 NFT 收藏列表的显示/隐藏切换功能  
**解决方案**: 详见 `common-issues.md` - 问题11  
**状态**: 已实现

### ✅ Windows PowerShell 启动问题
**问题描述**: 在 Windows PowerShell 中启动 React 开发服务器遇到语法错误  
**解决方案**: 详见 `common-issues.md` - 问题12  
**状态**: 已解决

### ✅ NFT 兜底加载机制
**问题描述**: 部分 NFT 通过标准方法无法获取，需要兜底策略  
**解决方案**: 详见 `common-issues.md` - 问题13  
**状态**: 已实现

## 常见问题分类

### 🦊 MetaMask 相关坑
- 钱包连接失败
- 网络切换问题
- 交易确认异常
- Gas费估算错误

### 📝 合约相关坑
- 合约部署失败
- 函数调用错误
- Gas不足问题
- 权限验证失败

### 🖥️ 前端相关坑
- Web3连接问题
- 状态更新异常
- UI交互错误
- 数据显示问题
- 编译错误（ESLint）
- 组件状态管理
- NFT 列表加载

### 🚀 部署相关坑
- 环境配置错误
- 网络连接问题
- 合约验证失败
- IPFS上传问题
- 启动服务器问题

### 🔧 系统环境坑
- Windows PowerShell 语法
- 端口占用问题
- 依赖安装失败
- 文件路径问题

## 解决问题的一般步骤

1. **问题复现**
   - 记录错误信息
   - 确定触发条件
   - 收集相关日志

2. **问题分析**
   - 检查控制台错误
   - 分析网络请求
   - 查看交易状态

3. **解决方案**
   - 查阅官方文档
   - 搜索相关问题
   - 尝试不同方法

4. **验证修复**
   - 测试修复效果
   - 确保无副作用
   - 记录解决过程

## 常用调试利器

- **浏览器开发者工具**: 查看控制台错误和网络请求
- **MetaMask**: 查看交易详情和账户状态
- **区块链浏览器**: 查看交易和合约状态
- **Hardhat Console**: 本地调试智能合约
- **React DevTools**: 调试React组件状态
- **ESLint**: 代码质量检查和错误提示

## 找不到答案？这样做

- 📚 查阅官方文档
- 🔍 搜索GitHub Issues
- 💬 社区论坛求助
- 📧 联系技术支持

---

*最后更新：2024年12月*  
*包含最新的前端修复和功能实现记录*